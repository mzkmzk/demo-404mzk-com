<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

<title>简单无限轮播</title>

<style type="text/css">
    .wrapper{
        user-select:none;
        width: 1500px;
         overflow: hidden;
    }
   
    ul{
        padding-left: 300px;
        white-space:nowrap;
    }
    li{
        list-style: none;
        display: inline-block;
    }

    img{
        width: 680px;
        height: 240px;
        
    }
</style>

</head>
<body >


<div class="wrapper">
    
    <ul class="j_carousel_ul">
        <li class="j_li_0"><img class="j_img_0"></li>
        <li class="j_li_1"><img class="j_img_1"></li>
        <li class="j_li_2"><img class="j_img_2"></li>
    </ul>
    <a href="javascript:;" class="j_pre">上一张</a>
     <a href="javascript:;" class="j_next" >下一张</a>
    <p>当前第 <em class="j_cur_index">0</em> 张</p>
</div>


<script type="text/javascript">
    var cur_index = 0,
        IMAGE_ARRAY = [
            '../images/wechat.png',
            '../images/sogou.png',
            '../images/xmind8.png',
            '../images/fuli.png',
            '../images/watch.jpg'
        ],
        get_right_index = function(index){
            return index < 0 ? IMAGE_ARRAY.length + index : index % IMAGE_ARRAY.length
        },
    change_pic = function(next_index){
        if (next_index === 'next') {
            next_index = cur_index + 1
        }else if (next_index === 'pre') {
            next_index = cur_index - 1
        }
       
         cur_index = get_right_index( next_index )
       
        //document.querySelector('.j_carousel_ul').style.marginLeft = '-' + cur_index * 680 +'px';
        
         document.querySelector('.j_img_0').src = IMAGE_ARRAY[  get_right_index( cur_index - 1) ];
        document.querySelector('.j_img_1').src = IMAGE_ARRAY[  cur_index ];
        document.querySelector('.j_img_2').src = IMAGE_ARRAY[ get_right_index( cur_index + 1 ) ];
        
        

        document.querySelector('.j_cur_index').innerHTML = cur_index
         document.querySelector('.j_carousel_ul').style.marginLeft = '-' + 1 * 680 +'px'; //纠正滑动距离
    }

     document.querySelector('.j_li_0').style.cssText = 'transform: translateZ(-200px)  rotateY(125deg) ';
        document.querySelector('.j_li_1').style.cssText = 'transform: translateX(0px) translateZ(-200px) rotateY(125deg)';
        document.querySelector('.j_li_2').style.cssText ='transform: translateZ(-200px) rotateY(-45deg)';

      document.querySelector('.j_carousel_ul').style.marginLeft = '-' + 1 * 680 +'px';
    document.querySelector('.j_img_0').src = IMAGE_ARRAY[ IMAGE_ARRAY.length - 1 ];
    document.querySelector('.j_img_1').src = IMAGE_ARRAY[ 0 ];
    document.querySelector('.j_img_2').src = IMAGE_ARRAY[ 1 ];

    //document.querySelector('.j_wrapper_img').src = image_array[ cur_index ]
    document.querySelector('.j_pre').addEventListener('click',function(){
       
        change_pic( cur_index - 1 )
    })

    document.querySelector('.j_next').addEventListener('click',function(){
        
        change_pic( cur_index + 1 )
    })
    //setTimeout(function(){
    //    new IScroll('.wrapper', { scrollX: true, freeScroll: true })
    //},3000)



</script>
<script type="text/javascript" src="../5-scroll/scroll.js"></script>


</body>
</html>