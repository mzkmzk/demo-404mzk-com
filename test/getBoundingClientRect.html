<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

<title>getBoundingClientRect</title>



<style type="text/css">
body{
    height: 3000px;
    width: 3000px;
}
div {
    width: 300px;
    height: 300px;
    background: red;
    margin-top: 1000px;
     margin-left: 1000px;
}
</style>

</head>
<body >

<div class="j_client_rect">12312312312</div>

<script type="text/javascript" src="/lib/underscore.js"></script>
<script type="text/javascript" src="/lib/jquery-3.2.1.js"></script>
<script type="text/javascript">


var jieliu = _.debounce(function(){
    var rect = document.querySelector('.j_client_rect').getBoundingClientRect(),
        window_height = window.innerHeight || document.documentElement.clientHeight,
        window_width = 
    console.log('top: ' + rect.top);
    console.log('left: ' + rect.left);
    console.log('right: ' + rect.right);
    console.log('bottom: ' + rect.bottom);
   var window_height = 
   console.log('is in viewport' + ( 
        rect.top 
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */
        rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */))
},500)

if (window.addEventListener){
    
    window.addEventListener('scroll', jieliu, false);
    //window.addEventListener('scroll', jieliu, false);
}else if (window.attachEvent) {
     document.body.attachEvent('onscroll', jieliu)
}else {
    window.onscroll = jieliu
}


</script>
</body>
</html>