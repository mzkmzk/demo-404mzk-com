<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

<title>jquery 1-11-3 deferred demo </title>

<!-- http://demo.404mzk.com/jquery/deferred-1-12-4.html  -->

<style type="text/css">

</style>

</head>
<body >




<script type="text/javascript">

function my_promise(callback){
    var a = new $.Deferred()
    callback(a)
    return a
}
var dfd = $.Deferred()
    dfd
    .resolve()
    .then(function(){
        /*return my_promise(function(p){
            setTimeout(function(){
                console.log('then')
                p.resolve();
            },2000)
        })*/
        return $.Deferred(function(p){
            setTimeout(function(){
                console.log('then')
                p.resolve();
            },2000)
        })
    })
    .then(function(){
        console.log('then2')
    })
    .done(function(){
        console.log('then3')
    })
    
</script>
</body>
</html>